syntax = "proto3";

package node;

option go_package = "./proto";

service NodeService {
  rpc GetUsers(GetUsersRequest) returns (GetUsersResponse) {}
  rpc GetApiResponse(GetApiResponseRequest) returns (GetApiResponseResponse) {}
  rpc GetLogData(GetLogDataRequest) returns (GetLogDataResponse) {} // Новый метод
}

message GetUsersRequest {}

message UUIDInbound {
  string uuid = 1;
  string inbound_tag = 2;
}

message User {
  string username = 1;
  repeated UUIDInbound uuid_inbounds = 2;
}

message GetUsersResponse {
  repeated User users = 1;
}

message GetApiResponseRequest {}

message GetApiResponseResponse {
  repeated Stat stats = 1;
}

message Stat {
  string name = 1;
  string value = 2;
}

message GetLogDataRequest {}

message GetLogDataResponse {
  map<string, UserLogData> user_log_data = 1; // Данные по пользователям
}

message UserLogData {
  repeated string valid_ips = 1; // Список актуальных IP-адресов
  map<string, int32> dns_stats = 2; // Статистика DNS-запросов
}